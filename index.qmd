---
title: "Lab 10"
subtitle: "ESS 330"
author: "Mckenna Cooper"
format: html
execute: 
  echo: true
---
## Libraries
```{r}
# spatial data science
library(tidyverse)
library(sf)
library(units)

# Data
library(AOI)

# Visualization
library(gghighlight)
library(ggrepel)
library(knitr)
```

# Question 1
## 1.1 Define a Projection
```{r}
eqdc <- '+proj=eqdc +lat_0=40 +lon_0=-96 +lat_1=20 +lat_2=60 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs'
```
## 1.2 Get USA Boundaries
```{r}
remotes::install_github("mikejohnson51/AOI")
conus_states <- aoi_get(state = 'conus')
conus_states_eqdc <- st_transform(conus_states, crs = eqdc)
```
## 1.3 Get country boundaries for Mexico, the United States of America, and Canada
```{r}
countries <- aoi_get(country = c("USA", "MX", "CA"))

# Reproject to Equidistant Conic
countries_proj <- st_transform(countries, crs = eqdc)
```
## 1.4 Get city locations from the CSV file
```{r}
readr::read_csv("data/uscities.csv")

cities_raw <- read_csv("data/uscities.csv")

glimpse(cities_raw)
```
```{r}
cities_sf <- st_as_sf(cities_raw, coords = c("lng", "lat"), crs = 4326) 
```

```{r}

cities_proj <- st_transform(cities_sf, crs = eqdc)

cities_conus <- st_join(cities_proj, conus_states_eqdc, join = st_within, left = FALSE)

```

# Question 2
## 2.1 Distance to USA Border (coastline or national) (km)
## 2.2 Distance to States (km)
## 2.3 Distance to Mexico (km)
## 2.4 Distance to Canada (km)
# Question 3
## 3.1 Data
## 3.2 City Distance from the Border
## 3.3 City Distance from Nearest State
## 3.4 Equidistance boundary from Mexico and Canada
# Question 4
## 4.1 Quantifing Border Zone
## 4.2 Mapping Border Zone
## 4.3 Instead of labeling the 10 most populous cites, label the most populous city in each state within the Danger Zone.

